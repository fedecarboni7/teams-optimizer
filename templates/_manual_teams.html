<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comparador Manual de Equipos</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f5f5f5;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .header h1 {
            font-size: 28px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .teams-builder {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .pool-section, .team-section {
            background: #f9f9f9;
            border-radius: 8px;
            padding: 20px;
            border: 2px solid #e0e0e0;
            min-height: 400px;
        }
        
        .pool-section {
            grid-column: span 1;
        }
        
        .section-header {
            text-align: center;
            padding: 12px;
            border-radius: 6px;
            margin-bottom: 15px;
            font-size: 18px;
            font-weight: bold;
        }
        
        .pool-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .team-a-header {
            background: linear-gradient(135deg, #2196F3 0%, #1976D2 100%);
            color: white;
        }
        
        .team-b-header {
            background: linear-gradient(135deg, #FF5722 0%, #E64A19 100%);
            color: white;
        }
        
        .players-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .player-card {
            background: white;
            padding: 12px 15px;
            border-radius: 6px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            cursor: move;
            transition: all 0.3s;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .player-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }
        
        .player-card.dragging {
            opacity: 0.5;
            transform: rotate(5deg);
        }
        
        .player-info {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }
        
        .player-name {
            font-weight: 600;
            color: #333;
            font-size: 16px;
        }
        
        .player-avg {
            font-size: 14px;
            color: #666;
        }
        
        .player-avg-badge {
            padding: 6px 12px;
            border-radius: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-weight: bold;
            font-size: 16px;
        }
        
        .action-buttons {
            display: flex;
            gap: 8px;
        }
        
        .assign-btn {
            padding: 6px 12px;
            border: none;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .assign-a {
            background: #2196F3;
            color: white;
        }
        
        .assign-a:hover {
            background: #1976D2;
        }
        
        .assign-b {
            background: #FF5722;
            color: white;
        }
        
        .assign-b:hover {
            background: #E64A19;
        }
        
        .remove-btn {
            background: #f44336;
            color: white;
        }
        
        .remove-btn:hover {
            background: #d32f2f;
        }
        
        .team-stats {
            margin-top: 15px;
            padding: 12px;
            background: white;
            border-radius: 6px;
            text-align: center;
        }
        
        .team-stats-label {
            font-size: 12px;
            color: #666;
            margin-bottom: 5px;
        }
        
        .team-stats-value {
            font-size: 20px;
            font-weight: bold;
            color: #333;
        }
        
        .drag-over {
            border: 2px dashed #667eea;
            background: #f0f0ff;
        }
        
        .comparison-section {
            margin-top: 30px;
            padding-top: 30px;
            border-top: 2px solid #e0e0e0;
        }
        
        .buttons-container {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin: 25px 0;
            flex-wrap: wrap;
        }
        
        .action-button {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .action-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .toggle-charts-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .toggle-charts-btn:not(:disabled):hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }
        
        .share-btn {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
        }
        
        .share-btn:not(:disabled):hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(76, 175, 80, 0.4);
        }
        
        .charts-section {
            margin-top: 20px;
            overflow: hidden;
            transition: max-height 0.5s ease, opacity 0.5s ease;
        }
        
        .charts-section.hidden {
            max-height: 0;
            opacity: 0;
        }
        
        .charts-section.visible {
            max-height: 2000px;
            opacity: 1;
        }
        
        .carousel-container {
            width: 100%;
            overflow: hidden;
            position: relative;
            background: white;
            border-radius: 8px;
            padding: 20px;
        }
        
        .carousel-wrapper {
            display: flex;
            transition: transform 0.3s ease-out;
        }
        
        .carousel-slide {
            min-width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .chart-container {
            width: 100%;
            max-width: 1000px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #e0e0e0;
        }
        
        th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-weight: 600;
            text-transform: uppercase;
            font-size: 0.9em;
        }
        
        tr:hover {
            background-color: #f5f5f5;
        }
        
        .team-a-cell {
            color: #2196F3;
            font-weight: 600;
        }
        
        .team-b-cell {
            color: #FF5722;
            font-weight: 600;
        }
        
        canvas {
            max-width: 100%;
            height: auto;
            display: block;
            margin: 0 auto;
        }
        
        .legend {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 20px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 3px;
        }
        
        .dots-container {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 20px;
        }
        
        .dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #ccc;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        .dot.active {
            background: #667eea;
        }
        
        .empty-state {
            text-align: center;
            color: #999;
            padding: 30px;
            font-style: italic;
        }
        
        @media (max-width: 1024px) {
            .teams-builder {
                grid-template-columns: 1fr;
            }
            
            .buttons-container {
                flex-direction: column;
            }
            
            .action-button {
                width: 100%;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>âš½ Comparador Manual de Equipos</h1>
            <p style="color: #666; margin-top: 10px;">Arrastra los jugadores o usa los botones para formar tus equipos</p>
        </div>
        
        <div class="teams-builder">
            <div class="pool-section" id="playerPool">
                <div class="section-header pool-header">
                    Jugadores Disponibles
                </div>
                <div class="players-list" id="poolList"></div>
            </div>
            
            <div class="team-section" id="teamASection">
                <div class="section-header team-a-header">
                    Equipo A
                </div>
                <div class="players-list" id="teamAList"></div>
                <div class="team-stats">
                    <div class="team-stats-label">Promedio del Equipo</div>
                    <div class="team-stats-value" id="teamAAvg">-</div>
                </div>
            </div>
            
            <div class="team-section" id="teamBSection">
                <div class="section-header team-b-header">
                    Equipo B
                </div>
                <div class="players-list" id="teamBList"></div>
                <div class="team-stats">
                    <div class="team-stats-label">Promedio del Equipo</div>
                    <div class="team-stats-value" id="teamBAvg">-</div>
                </div>
            </div>
        </div>
        
        <div class="comparison-section">
            <div class="buttons-container">
                <button class="action-button toggle-charts-btn" id="toggleChartsBtn" onclick="toggleCharts()" disabled>
                    <span>ðŸ“Š</span> <span id="toggleText">Mostrar GrÃ¡ficos</span>
                </button>
                <button class="action-button share-btn" id="shareBtn" onclick="shareTeams()" disabled>
                    <span>ðŸ”—</span> Compartir Equipos
                </button>
            </div>
            
            <div class="charts-section hidden" id="chartsSection">
                <div class="carousel-container">
                    <div class="carousel-wrapper" id="carouselWrapper">
                        <div class="carousel-slide">
                            <div class="chart-container">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>Habilidad</th>
                                            <th>Equipo A</th>
                                            <th>Equipo B</th>
                                            <th>Diferencia</th>
                                        </tr>
                                    </thead>
                                    <tbody id="tableBody"></tbody>
                                </table>
                            </div>
                        </div>
                        
                        <div class="carousel-slide">
                            <div class="chart-container">
                                <canvas id="radarCanvas" width="600" height="600"></canvas>
                                <div class="legend">
                                    <div class="legend-item">
                                        <div class="legend-color" style="background: rgba(33, 150, 243, 0.6);"></div>
                                        <span>Equipo A</span>
                                    </div>
                                    <div class="legend-item">
                                        <div class="legend-color" style="background: rgba(255, 87, 34, 0.6);"></div>
                                        <span>Equipo B</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="dots-container">
                        <div class="dot active" onclick="goToSlide(0)"></div>
                        <div class="dot" onclick="goToSlide(1)"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const skills = [
            'Velocidad', 'Resistencia', 'Tiro', 'Defensa', 'Pase',
            'Regate', 'FÃ­sico', 'TÃ©cnica', 'VisiÃ³n'
        ];
        
        const playerNames = [
            'GarcÃ­a', 'MartÃ­nez', 'RodrÃ­guez', 'LÃ³pez', 'FernÃ¡ndez',
            'GonzÃ¡lez', 'PÃ©rez', 'SÃ¡nchez', 'Romero', 'Torres'
        ];
        
        function generatePlayer(name) {
            const player = { name, location: 'pool' };
            skills.forEach(skill => {
                player[skill] = Math.floor(Math.random() * 4) + 7;
            });
            return player;
        }
        
        function calculateAverage(player) {
            const sum = skills.reduce((acc, skill) => acc + player[skill], 0);
            return (sum / skills.length).toFixed(1);
        }
        
        function calculateTeamAverages(team) {
            if (team.length === 0) return null;
            const averages = {};
            skills.forEach(skill => {
                const sum = team.reduce((acc, player) => acc + player[skill], 0);
                averages[skill] = (sum / team.length).toFixed(1);
            });
            return averages;
        }
        
        const players = playerNames.map(name => generatePlayer(name));
        let draggedPlayer = null;
        let currentSlide = 0;
        
        function createPlayerCard(player) {
            const card = document.createElement('div');
            card.className = 'player-card';
            card.draggable = true;
            card.dataset.playerName = player.name;
            
            const avg = calculateAverage(player);
            
            let buttons = '';
            if (player.location === 'pool') {
                buttons = `
                    <div class="action-buttons">
                        <button class="assign-btn assign-a" onclick="assignToTeam('${player.name}', 'teamA')">A</button>
                        <button class="assign-btn assign-b" onclick="assignToTeam('${player.name}', 'teamB')">B</button>
                    </div>
                `;
            } else {
                buttons = `
                    <div class="action-buttons">
                        <button class="assign-btn remove-btn" onclick="removeFromTeam('${player.name}')">âœ•</button>
                    </div>
                `;
            }
            
            card.innerHTML = `
                <div class="player-info">
                    <div class="player-name">${player.name}</div>
                    <div class="player-avg">Promedio: ${avg}</div>
                </div>
                <div style="display: flex; align-items: center; gap: 10px;">
                    <div class="player-avg-badge">${avg}</div>
                    ${buttons}
                </div>
            `;
            
            card.addEventListener('dragstart', (e) => {
                draggedPlayer = player;
                card.classList.add('dragging');
            });
            
            card.addEventListener('dragend', (e) => {
                card.classList.remove('dragging');
            });
            
            return card;
        }
        
        function assignToTeam(playerName, team) {
            const player = players.find(p => p.name === playerName);
            if (!player) return;
            
            player.location = team;
            renderAll();
        }
        
        function removeFromTeam(playerName) {
            const player = players.find(p => p.name === playerName);
            if (!player) return;
            
            player.location = 'pool';
            renderAll();
        }
        
        function renderAll() {
            const poolList = document.getElementById('poolList');
            const teamAList = document.getElementById('teamAList');
            const teamBList = document.getElementById('teamBList');
            
            poolList.innerHTML = '';
            teamAList.innerHTML = '';
            teamBList.innerHTML = '';
            
            const poolPlayers = players.filter(p => p.location === 'pool');
            const teamAPlayers = players.filter(p => p.location === 'teamA');
            const teamBPlayers = players.filter(p => p.location === 'teamB');
            
            if (poolPlayers.length === 0) {
                poolList.innerHTML = '<div class="empty-state">Todos los jugadores asignados</div>';
            } else {
                poolPlayers.forEach(player => {
                    poolList.appendChild(createPlayerCard(player));
                });
            }
            
            if (teamAPlayers.length === 0) {
                teamAList.innerHTML = '<div class="empty-state">Arrastra jugadores aquÃ­</div>';
            } else {
                teamAPlayers.forEach(player => {
                    teamAList.appendChild(createPlayerCard(player));
                });
            }
            
            if (teamBPlayers.length === 0) {
                teamBList.innerHTML = '<div class="empty-state">Arrastra jugadores aquÃ­</div>';
            } else {
                teamBPlayers.forEach(player => {
                    teamBList.appendChild(createPlayerCard(player));
                });
            }
            
            updateTeamStats();
            updateCharts();
        }
        
        function updateTeamStats() {
            const teamAPlayers = players.filter(p => p.location === 'teamA');
            const teamBPlayers = players.filter(p => p.location === 'teamB');
            
            const teamAAvgEl = document.getElementById('teamAAvg');
            const teamBAvgEl = document.getElementById('teamBAvg');
            
            if (teamAPlayers.length > 0) {
                const totalAvg = teamAPlayers.reduce((sum, p) => sum + parseFloat(calculateAverage(p)), 0);
                teamAAvgEl.textContent = (totalAvg / teamAPlayers.length).toFixed(1);
            } else {
                teamAAvgEl.textContent = '-';
            }
            
            if (teamBPlayers.length > 0) {
                const totalAvg = teamBPlayers.reduce((sum, p) => sum + parseFloat(calculateAverage(p)), 0);
                teamBAvgEl.textContent = (totalAvg / teamBPlayers.length).toFixed(1);
            } else {
                teamBAvgEl.textContent = '-';
            }
            
            const canCompare = teamAPlayers.length > 0 && teamBPlayers.length > 0;
            document.getElementById('toggleChartsBtn').disabled = !canCompare;
            document.getElementById('shareBtn').disabled = !canCompare;
        }
        
        function updateCharts() {
            const teamAPlayers = players.filter(p => p.location === 'teamA');
            const teamBPlayers = players.filter(p => p.location === 'teamB');
            
            if (teamAPlayers.length === 0 || teamBPlayers.length === 0) return;
            
            const avgTeamA = calculateTeamAverages(teamAPlayers);
            const avgTeamB = calculateTeamAverages(teamBPlayers);
            
            fillTable(avgTeamA, avgTeamB);
            drawRadarChart(avgTeamA, avgTeamB);
        }
        
        function fillTable(avgTeamA, avgTeamB) {
            const tableBody = document.getElementById('tableBody');
            tableBody.innerHTML = '';
            
            skills.forEach(skill => {
                const row = document.createElement('tr');
                const diff = (avgTeamA[skill] - avgTeamB[skill]).toFixed(1);
                const diffSign = diff > 0 ? '+' : '';
                row.innerHTML = `
                    <td><strong>${skill}</strong></td>
                    <td class="team-a-cell">${avgTeamA[skill]}</td>
                    <td class="team-b-cell">${avgTeamB[skill]}</td>
                    <td style="color: ${diff > 0 ? '#4CAF50' : diff < 0 ? '#f44336' : '#999'}">${diffSign}${diff}</td>
                `;
                tableBody.appendChild(row);
            });
        }
        
        function drawRadarChart(avgTeamA, avgTeamB) {
            const canvas = document.getElementById('radarCanvas');
            const ctx = canvas.getContext('2d');
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const radius = Math.min(centerX, centerY) - 80;
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            ctx.strokeStyle = '#e0e0e0';
            ctx.lineWidth = 1;
            for (let i = 1; i <= 5; i++) {
                ctx.beginPath();
                ctx.arc(centerX, centerY, (radius / 5) * i, 0, 2 * Math.PI);
                ctx.stroke();
            }
            
            const angleStep = (2 * Math.PI) / skills.length;
            ctx.strokeStyle = '#e0e0e0';
            ctx.fillStyle = '#333';
            ctx.font = '14px Arial';
            ctx.textAlign = 'center';
            
            skills.forEach((skill, i) => {
                const angle = angleStep * i - Math.PI / 2;
                const x = centerX + Math.cos(angle) * radius;
                const y = centerY + Math.sin(angle) * radius;
                
                ctx.beginPath();
                ctx.moveTo(centerX, centerY);
                ctx.lineTo(x, y);
                ctx.stroke();
                
                const labelX = centerX + Math.cos(angle) * (radius + 30);
                const labelY = centerY + Math.sin(angle) * (radius + 30);
                ctx.fillText(skill, labelX, labelY);
            });
            
            ctx.beginPath();
            ctx.strokeStyle = 'rgba(33, 150, 243, 0.8)';
            ctx.fillStyle = 'rgba(33, 150, 243, 0.3)';
            ctx.lineWidth = 3;
            
            skills.forEach((skill, i) => {
                const angle = angleStep * i - Math.PI / 2;
                const value = avgTeamA[skill];
                const distance = (value / 10) * radius;
                const x = centerX + Math.cos(angle) * distance;
                const y = centerY + Math.sin(angle) * distance;
                
                if (i === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            });
            ctx.closePath();
            ctx.fill();
            ctx.stroke();
            
            ctx.beginPath();
            ctx.strokeStyle = 'rgba(255, 87, 34, 0.8)';
            ctx.fillStyle = 'rgba(255, 87, 34, 0.3)';
            ctx.lineWidth = 3;
            
            skills.forEach((skill, i) => {
                const angle = angleStep * i - Math.PI / 2;
                const value = avgTeamB[skill];
                const distance = (value / 10) * radius;
                const x = centerX + Math.cos(angle) * distance;
                const y = centerY + Math.sin(angle) * distance;
                
                if (i === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            });
            ctx.closePath();
            ctx.fill();
            ctx.stroke();
        }
        
        function setupDragAndDrop() {
            const dropZones = [
                document.getElementById('poolList'),
                document.getElementById('teamAList'),
                document.getElementById('teamBList')
            ];
            
            dropZones.forEach(zone => {
                zone.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    zone.parentElement.classList.add('drag-over');
                });
                
                zone.addEventListener('dragleave', (e) => {
                    zone.parentElement.classList.remove('drag-over');
                });
                
                zone.addEventListener('drop', (e) => {
                    e.preventDefault();
                    zone.parentElement.classList.remove('drag-over');
                    
                    if (!draggedPlayer) return;
                    
                    if (zone.id === 'poolList') {
                        draggedPlayer.location = 'pool';
                    } else if (zone.id === 'teamAList') {
                        draggedPlayer.location = 'teamA';
                    } else if (zone.id === 'teamBList') {
                        draggedPlayer.location = 'teamB';
                    }
                    
                    renderAll();
                    draggedPlayer = null;
                });
            });
        }
        
        function toggleCharts() {
            const chartsSection = document.getElementById('chartsSection');
            const toggleText = document.getElementById('toggleText');
            
            if (chartsSection.classList.contains('visible')) {
                chartsSection.classList.remove('visible');
                chartsSection.classList.add('hidden');
                toggleText.textContent = 'Mostrar GrÃ¡ficos';
            } else {
                chartsSection.classList.remove('hidden');
                chartsSection.classList.add('visible');
                toggleText.textContent = 'Ocultar GrÃ¡ficos';
            }
        }
        
        function shareTeams() {
            const teamAPlayers = players.filter(p => p.location === 'teamA');
            const teamBPlayers = players.filter(p => p.location === 'teamB');
            
            const teamANames = teamAPlayers.map(p => p.name).join(', ');
            const teamBNames = teamBPlayers.map(p => p.name).join(', ');
            
            const teamAAvg = document.getElementById('teamAAvg').textContent;
            const teamBAvg = document.getElementById('teamBAvg').textContent;
            
            const shareText = `âš½ Equipos de FÃºtbol\n\nEquipo A (${teamAAvg}): ${teamANames}\n\nEquipo B (${teamBAvg}): ${teamBNames}`;
            
            if (navigator.share) {
                navigator.share({
                    title: 'Equipos de FÃºtbol',
                    text: shareText
                }).catch(err => console.log('Error al compartir:', err));
            } else {
                navigator.clipboard.writeText(shareText).then(() => {
                    alert('Â¡Equipos copiados al portapapeles!');
                });
            }
        }
        
        function goToSlide(slideIndex) {
            currentSlide = slideIndex;
            const wrapper = document.getElementById('carouselWrapper');
            wrapper.style.transform = `translateX(-${slideIndex * 100}%)`;
            
            const dots = document.querySelectorAll('.dot');
            dots.forEach((dot, i) => {
                dot.classList.toggle('active', i === slideIndex);
            });
        }
        
        function setupCarousel() {
            const container = document.querySelector('.carousel-container');
            let touchStartX = 0;
            let touchEndX = 0;
            
            function handleSwipe() {
                const diff = touchStartX - touchEndX;
                if (Math.abs(diff) > 50) {
                    if (diff > 0 && currentSlide < 1) {
                        goToSlide(1);
                    } else if (diff < 0 && currentSlide > 0) {
                        goToSlide(0);
                    }
                }
            }
            
            container.addEventListener('touchstart', (e) => {
                touchStartX = e.changedTouches[0].screenX;
            });
            
            container.addEventListener('touchend', (e) => {
                touchEndX = e.changedTouches[0].screenX;
                handleSwipe();
            });
        }
        
        // Inicializar la aplicaciÃ³n
        document.addEventListener('DOMContentLoaded', () => {
            renderAll();
            setupDragAndDrop();
            setupCarousel();
        });
    </script>
</body>
</html>